# ğŸ—ï¸ System Architecture

## Overview

This is a full-stack real-time chat application with the following architecture:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT SIDE                         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              React Frontend (Port 3000)              â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Pages   â”‚  â”‚Componentsâ”‚  â”‚  State (Zustand) â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚  â”‚  â”‚ Login    â”‚  â”‚ Sidebar  â”‚  â”‚ authStore        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Register â”‚  â”‚ ChatBox  â”‚  â”‚ chatStore        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Chat     â”‚  â”‚ Message  â”‚  â”‚                  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚         Utils & Hooks                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ api.js (Axios)                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ socket.js (Socket.IO Client)               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ useSocket.js (Socket Event Handlers)       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                   â”‚
         HTTP/RESTâ”‚                   â”‚WebSocket (Socket.IO)
                  â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚              Node.js Backend (Port 5000)                      â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Express Server                      â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  Routes  â”‚  â”‚Controllersâ”‚  â”‚     Middleware      â”‚ â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚  â”‚  â”‚ /auth    â”‚  â”‚ authCtrl â”‚  â”‚ JWT Authentication  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ /users   â”‚  â”‚ userCtrl â”‚  â”‚ Input Validation    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ /chats   â”‚  â”‚ chatCtrl â”‚  â”‚ Error Handling      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ /messagesâ”‚  â”‚ msgCtrl  â”‚  â”‚                     â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Socket.IO Server (WebSocket)                â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â€¢ Connection Management                              â”‚  â”‚
â”‚  â”‚  â€¢ Room Management (Chat Rooms)                       â”‚  â”‚
â”‚  â”‚  â€¢ Real-time Event Handling:                          â”‚  â”‚
â”‚  â”‚    - send_message / receive_message                   â”‚  â”‚
â”‚  â”‚    - typing / stop_typing                             â”‚  â”‚
â”‚  â”‚    - user_online / user_offline                       â”‚  â”‚
â”‚  â”‚    - message_seen / message_delivered                 â”‚  â”‚
â”‚  â”‚    - add_reaction / remove_reaction                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Data Models                          â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â€¢ User (username, email, password, isOnline)         â”‚  â”‚
â”‚  â”‚  â€¢ Chat (users, isGroupChat, latestMessage)           â”‚  â”‚
â”‚  â”‚  â€¢ Message (sender, content, readBy, reactions)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Mongoose ODM
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚                    MongoDB Database                           â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Users      â”‚  â”‚    Chats     â”‚  â”‚   Messages   â”‚       â”‚
â”‚  â”‚  Collection  â”‚  â”‚  Collection  â”‚  â”‚  Collection  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### 1. Authentication Flow

```
User Registration:
â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚â”€â”€â”€â”€â”€â–ºâ”‚Express  â”‚â”€â”€â”€â”€â”€â–ºâ”‚Hash      â”‚â”€â”€â”€â”€â”€â–ºâ”‚MongoDB  â”‚
â”‚      â”‚ POST â”‚/registerâ”‚      â”‚Password  â”‚      â”‚Save Userâ”‚
â”‚      â”‚â—„â”€â”€â”€â”€â”€â”¤         â”‚â—„â”€â”€â”€â”€â”€â”¤Generate  â”‚â—„â”€â”€â”€â”€â”€â”¤         â”‚
â”‚      â”‚ JWT  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚JWT       â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Login:
â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚â”€â”€â”€â”€â”€â–ºâ”‚Express  â”‚â”€â”€â”€â”€â”€â–ºâ”‚Verify    â”‚â”€â”€â”€â”€â”€â–ºâ”‚MongoDB  â”‚
â”‚      â”‚ POST â”‚/login   â”‚      â”‚Password  â”‚      â”‚Find Userâ”‚
â”‚      â”‚â—„â”€â”€â”€â”€â”€â”¤         â”‚â—„â”€â”€â”€â”€â”€â”¤Generate  â”‚â—„â”€â”€â”€â”€â”€â”¤         â”‚
â”‚      â”‚ JWT  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚JWT       â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Real-Time Messaging Flow

```
Sending a Message:

Client A                Server                  Client B
   â”‚                      â”‚                        â”‚
   â”‚  1. Type message     â”‚                        â”‚
   â”‚                      â”‚                        â”‚
   â”‚  2. emit('send_      â”‚                        â”‚
   â”‚     message')        â”‚                        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
   â”‚                      â”‚                        â”‚
   â”‚                      â”‚  3. Save to MongoDB    â”‚
   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
   â”‚                      â”‚           â”‚            â”‚
   â”‚                      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
   â”‚                      â”‚                        â”‚
   â”‚                      â”‚  4. io.to(chatId)      â”‚
   â”‚                      â”‚     .emit('receive_    â”‚
   â”‚                      â”‚      message')         â”‚
   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                      â”‚                        â”‚
   â”‚  5. Update UI        â”‚                        â”‚  6. Update UI
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
   â”‚  (own message)       â”‚                        â”‚  (received)
   â”‚                      â”‚                        â”‚
```

### 3. Typing Indicator Flow

```
Client A                Server                  Client B
   â”‚                      â”‚                        â”‚
   â”‚  1. Start typing     â”‚                        â”‚
   â”‚                      â”‚                        â”‚
   â”‚  emit('typing')      â”‚                        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
   â”‚                      â”‚                        â”‚
   â”‚                      â”‚  2. Broadcast          â”‚
   â”‚                      â”‚     to others          â”‚
   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                      â”‚                        â”‚
   â”‚                      â”‚                        â”‚  3. Show
   â”‚                      â”‚                        â”‚  "A is typing..."
   â”‚                      â”‚                        â”‚
   â”‚  4. Stop typing      â”‚                        â”‚
   â”‚  (after 2s)          â”‚                        â”‚
   â”‚                      â”‚                        â”‚
   â”‚  emit('stop_typing') â”‚                        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
   â”‚                      â”‚                        â”‚
   â”‚                      â”‚  5. Broadcast          â”‚
   â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                      â”‚                        â”‚
   â”‚                      â”‚                        â”‚  6. Hide
   â”‚                      â”‚                        â”‚  indicator
   â”‚                      â”‚                        â”‚
```

### 4. Online Status Flow

```
User Connects:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Client Aâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Server â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Client Bâ”‚
â”‚        â”‚  connect()   â”‚        â”‚  broadcast   â”‚        â”‚
â”‚        â”‚              â”‚  Add toâ”‚  user_online â”‚        â”‚
â”‚        â”‚              â”‚onlineMapâ”‚              â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                        Update MongoDB
                        isOnline: true

User Disconnects:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Client Aâ”‚              â”‚ Server â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Client Bâ”‚
â”‚        â”‚  disconnect()â”‚        â”‚  broadcast   â”‚        â”‚
â”‚ (gone) â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºRemove  â”‚user_offline  â”‚        â”‚
â”‚        â”‚              â”‚from mapâ”‚              â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                        Update MongoDB
                        isOnline: false
                        lastSeen: now
```

## Key Components

### Backend Components

1. **Express Server** (`server.js`)
   - HTTP API endpoints
   - Middleware setup
   - Static file serving

2. **Socket.IO Server** (`socket/socketHandler.js`)
   - WebSocket connection management
   - Real-time event handling
   - Room management

3. **Controllers**
   - Business logic separated from routes
   - Database operations
   - Response formatting

4. **Models**
   - MongoDB schemas
   - Data validation
   - Virtual fields and methods

5. **Middleware**
   - JWT authentication
   - Input validation
   - Error handling

### Frontend Components

1. **Pages**
   - Route-level components
   - Authentication pages
   - Main chat page

2. **Components**
   - Reusable UI elements
   - Message bubbles
   - Chat sidebar
   - Input controls

3. **State Management** (Zustand)
   - Authentication state
   - Chat data
   - UI state

4. **Custom Hooks**
   - `useSocket` - WebSocket event listeners
   - Reusable logic

5. **Utils**
   - API configuration (Axios)
   - Socket setup
   - Helper functions

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Security Layers                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. HTTPS (Production)                  â”‚
â”‚     â€¢ Encrypted communication           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2. CORS                                â”‚
â”‚     â€¢ Origin whitelist                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3. JWT Authentication                  â”‚
â”‚     â€¢ Token-based auth                  â”‚
â”‚     â€¢ HTTP + WebSocket                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  4. Password Hashing                    â”‚
â”‚     â€¢ bcrypt with salt                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  5. Input Validation                    â”‚
â”‚     â€¢ express-validator                 â”‚
â”‚     â€¢ Sanitization                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  6. MongoDB Injection Prevention        â”‚
â”‚     â€¢ Mongoose schema validation        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technology Stack Summary

| Layer      | Technology           | Purpose                    |
|------------|---------------------|----------------------------|
| Frontend   | React 18            | UI framework              |
| Build Tool | Vite                | Fast development server   |
| Styling    | Tailwind CSS        | Utility-first CSS         |
| State      | Zustand             | Lightweight state manager |
| Routing    | React Router        | Client-side routing       |
| HTTP       | Axios               | HTTP client               |
| WebSocket  | Socket.IO Client    | Real-time communication   |
| Backend    | Node.js + Express   | Server framework          |
| WebSocket  | Socket.IO           | WebSocket library         |
| Database   | MongoDB             | NoSQL database            |
| ODM        | Mongoose            | MongoDB object modeling   |
| Auth       | JWT                 | Token authentication      |
| Validation | express-validator   | Input validation          |
| Security   | bcryptjs            | Password hashing          |

## Scalability Considerations

### Current Setup (Single Server)
- Supports ~10,000 concurrent connections
- Suitable for small to medium applications

### Scaling Options

1. **Horizontal Scaling** (Multiple Servers)
   ```
   Load Balancer
        â”‚
        â”œâ”€â”€â–º Server 1 â”€â”
        â”‚              â”‚
        â”œâ”€â”€â–º Server 2 â”€â”¼â”€â”€â–º Redis Pub/Sub
        â”‚              â”‚
        â””â”€â”€â–º Server 3 â”€â”˜
   ```

2. **Database Scaling**
   - MongoDB Atlas auto-scaling
   - Read replicas for high read loads
   - Sharding for large datasets

3. **Caching Layer**
   - Redis for session storage
   - Cache frequently accessed data
   - Pub/Sub for multi-server WebSocket

4. **CDN for Static Assets**
   - Serve frontend from CDN
   - Reduce server load
   - Faster global delivery

## Performance Optimizations

1. **Frontend**
   - Code splitting
   - Lazy loading
   - Virtual scrolling for messages
   - Debounced typing indicators

2. **Backend**
   - Database indexing
   - Query optimization
   - Connection pooling
   - Rate limiting

3. **WebSocket**
   - Efficient room management
   - Selective event broadcasting
   - Binary data for files
   - Compression

---

**This architecture enables real-time, scalable, and secure chat communication!** ğŸš€
